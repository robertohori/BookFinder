(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{123:function(e,t,a){},124:function(e,t,a){},125:function(e,t,a){"use strict";a.r(t);var n,r=a(0),l=a.n(r),c=a(14),o=a.n(c),i=(a(67),a(68),a(17)),u=a(21),s=a(9),m=a(15),d=a(37),E=a(54),b={query:"",isFetching:!1,data:{},error:""},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_BOOKS":return Object.assign({},e,{isFetching:!0,query:t.query});case"RECEIVE_BOOKS":return Object.assign({},e,{isFetching:!1,data:"success"===t.status?t.payload:b.data,error:"error"===t.status?t.payload:b.error});default:return e}},p=a(57),f=Object(s.b)(),h=Object(m.createStore)((n=f,Object(m.combineReducers)({router:Object(u.b)(n),books:g})),{},Object(E.composeWithDevTools)(Object(m.applyMiddleware)(Object(d.a)(f),p.a))),y=a(34),v=function(){return l.a.createElement("header",{id:"app-header"},l.a.createElement(y.a,{bg:"light",expand:"lg"},l.a.createElement(y.a.Brand,{href:"#/"},"Book Finder")))},O=function(){return l.a.createElement("footer",{id:"app-footer","aria-label":"Footer"},"\xa9 ",(new Date).getFullYear())},k=a(60),j=a(6),S=a(12),F=a(18),w=a(61),N=a(32),_=a.n(N),B=a(33),C=a.n(B),q=function(e){var t=e.books.docs;return l.a.createElement("div",{className:"books-list"},l.a.createElement("table",null,l.a.createElement("caption",{className:"sr-only","data-testid":"table"},"List of Books"),l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Title "),l.a.createElement("th",null,"Author"),l.a.createElement("th",null,"Published Date"))),l.a.createElement("tbody",null,t.map(function(e){return l.a.createElement("tr",{key:e.key},l.a.createElement("td",null,e.cover_i?l.a.createElement("img",{src:"https://covers.openlibrary.org/b/id/\n                            ".concat(e.cover_i," \n                            -S.jpg"),alt:"",className:"cover"}):l.a.createElement("img",{src:"https://cdn2.iconfinder.com/data/icons/symbol-gray-set-3b/100/1-40-1024.png",width:"40px",alt:""}),e.title?e.title:"Not informed"),l.a.createElement("td",null,e.author_name?e.author_name:"Not informed"),l.a.createElement("td",null,e.publish_date?e.publish_date.length>1?l.a.createElement("ul",null,e.publish_date.map(function(e,t){return l.a.createElement("li",{key:t},l.a.createElement(C.a,{format:"MMMM DD YYYY"},new Date(e)))})):l.a.createElement(C.a,{format:"MMMM DD YYYY"},e.publish_date[0]):"Date not informed"))}))))},P=function(e){var t=e.totalRegister,a=e.callBackCurrentPage,n=e.currentpage,c=e.childFunc;l.a.useEffect(function(){c.current=o},[]);var o=function(e){w(e.totalRegister),m(e.page)},i=Object(r.useState)(n),u=Object(S.a)(i,2),s=u[0],m=u[1],d=Object(r.useState)(10),E=Object(S.a)(d,1)[0],b=Object(r.useState)(5),g=Object(S.a)(b,1)[0],p=Object(r.useState)(5),f=Object(S.a)(p,2),h=f[0],y=f[1],v=Object(r.useState)(0),O=Object(S.a)(v,2),k=O[0],j=O[1],F=function(e){m(Number(e.target.id)),a(Number(e.target.id))},w=function(e){for(var t=[],a=1;a<=Math.ceil(e/E);a++)t.push(a);return t},N=w(t),_=N.map(function(e){return e<h+1&&e>k?l.a.createElement("li",{key:e},l.a.createElement("button",{"aria-current":s===e,id:e,onClick:F,"aria-label":"Page "+e},e)):null}),B=null;N.length>h&&(B=l.a.createElement("li",null,l.a.createElement("button",{onClick:function(){m(s+1),s+1>h&&(y(h+g),j(k+g)),a(s)}},"Next page")));var C=null;return s>1&&N.length>0&&(C=l.a.createElement("li",null,l.a.createElement("button",{onClick:function(){m(s-1),(s-1)%g===0&&(y(h-g),j(k-g)),a(s)}},"Previous page"))),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"paginationControl",role:"navigation","aria-label":"Pagination"},l.a.createElement("ul",{className:"pageNumbers"},C,_,B)))},M=a(58),R=a.n(M),x=function(e){return{type:"RECEIVE_BOOKS",status:e.status,payload:e.payload}},D=function(e){var t=e.query,a=e.sort,n=(e.qtdPage,e.page);return function(e){e(function(e){return{type:"REQUEST_BOOKS",query:e}}(t));var r="http://openlibrary.org/search.json?q=".concat(t,"&limit=10","&page=").concat(n||1).concat("title_desc"===a||"title_asc"===a?"":a?"&sort=".concat(a):"");return R.a.get(r).then(function(t){"title_asc"===a?t.data.docs.sort(function(e,t){return e.title.localeCompare(t.title)}):"title_desc"===a&&t.data.docs.sort(function(e,t){return t.title.localeCompare(e.title)}),e(x({status:"success",payload:t.data}))}).catch(function(t){e(x({status:"error",payload:t}))})}},Y=a(59),T=a.n(Y),I=Object(i.c)(function(e){console.log("mapStateToProps:",e);var t=e.books;return{data:t.data,isFetching:t.isFetching,query:t.query,error:t.error}},function(e){return Object(m.bindActionCreators)({getBooks:D},e)})(function(e){var t=e.getBooks,a=e.data,n=e.isFetching,c=e.query,o=e.error,i=Object(r.useState)(""),u=Object(S.a)(i,2),s=u[0],m=u[1],d=Object(r.useState)(1),E=Object(S.a)(d,2),b=E[0],g=E[1],p=Object(r.useState)(c),f=Object(S.a)(p,2),h=f[0],y=f[1],v=l.a.useRef(null),O=function(e){var t=e.sort;m(t),g(1),k({query:h,currentPage:1,sort:t}),v.current({page:1})},k=T()(function(e){var a=e.query,n=e.currentPage,r=e.sort;t({query:a,page:n,sort:r})},700),j="";return j=n?l.a.createElement("p",{role:"alert","data-testid":"loading"},"Loading..."):_()(o)?function(e,t,a,n,r){if(_()(t))return null;var c=t.numFound;return l.a.createElement(l.a.Fragment,null,l.a.createElement("p",{role:"alert",className:"sr-only"},"End of loading"),l.a.createElement("h2",null,"Search results for: ".concat(a)),l.a.createElement("p",null,"Total results: ",c),c>0?l.a.createElement(l.a.Fragment,null,l.a.createElement(q,{books:t,currentpage:n,totalRegister:c})):null)}(0,a,c,b):l.a.createElement("p",{role:"alert"},"We are having a issue with our server, please try again"),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"search-books"},l.a.createElement(F.a,{className:"search-books--form",onSubmit:function(e){e.preventDefault(),g(1),k({query:h,currentPage:1,sort:s}),v.current({page:1})}},l.a.createElement(F.a.Group,{controlId:"formBasicEmail"},l.a.createElement(F.a.Label,null,"Book's name"),l.a.createElement(F.a.Control,{type:"text",onChange:function(e){return y(e.target.value)},placeholder:"Harry Potter, Food and Love","aria-describedby":"descSearch",tabIndex:"0","data-testid":"search"}),l.a.createElement(F.a.Text,{className:"text-muted",id:"descSearch"},"Search the world's most comprehensive index of full-text books."),l.a.createElement(w.a,{variant:"validBlue",type:"submit","data-testid":"toggle"},"Search")))),l.a.createElement("div",{className:"books"},a&&a.numFound>0?l.a.createElement("div",null,l.a.createElement("span",null,"Order by: "),l.a.createElement("ul",{className:"pageNumbers"},l.a.createElement("li",null,l.a.createElement("button",{"aria-label":"Order by most editions ".concat("editions"===s?"selected":""),onClick:function(e){return O({sort:"editions"})},"aria-current":"editions"===s},"Most Editions")),l.a.createElement("li",null,l.a.createElement("button",{"aria-label":"Order by first published ".concat("old"===s?"selected":""),onClick:function(e){return O({sort:"old"})},"aria-current":"old"===s},"First Published")),l.a.createElement("li",null,l.a.createElement("button",{"aria-label":"Order by most recent ".concat("new"===s?"selected":""),onClick:function(e){return O({sort:"new"})},"aria-current":"new"===s},"Most Recent")),l.a.createElement("li",null,l.a.createElement("button",{"aria-label":"Order by random ".concat("random"===s?"selected":""),onClick:function(e){return O({sort:"random"})},"aria-current":"random"===s},"Random")),l.a.createElement("li",null,l.a.createElement("button",{"aria-label":"Order by title ".concat("title_asc"===s?"selected":""),onClick:function(e){return O({sort:"title_asc"})},"aria-current":"title_asc"===s},"Title")))):"",j,l.a.createElement(P,{totalRegister:a?a.numFound:0,currentpage:b,callBackCurrentPage:function(e){g(e),k({query:h,currentPage:e,sort:s})},childFunc:v})))}),W=(a(123),function(){return l.a.createElement("div",{id:"home",className:"page"},l.a.createElement("div",{className:"container"},l.a.createElement("h1",null,"Welcome to my store"),l.a.createElement(I,null)))}),K=l.a.createElement(k.a,{basename:"/BookFinder"},l.a.createElement(j.c,null,l.a.createElement(j.a,{path:"/BookFinder"},l.a.createElement(W,null))));a(124);var L=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{class:"skip-main",href:"#main"},"Skip to main content"),l.a.createElement(i.a,{store:h},l.a.createElement(u.a,{history:f},l.a.createElement("div",{className:"app"},l.a.createElement(v,null),l.a.createElement("main",{id:"main"},K)),l.a.createElement(O,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},62:function(e,t,a){e.exports=a(125)},68:function(e,t,a){}},[[62,1,2]]]);
//# sourceMappingURL=main.3bf8f74b.chunk.js.map